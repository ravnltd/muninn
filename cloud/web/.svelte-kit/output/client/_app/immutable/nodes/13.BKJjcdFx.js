import{a as i,t as P,f as g}from"../chunks/BQbrFHdE.js";import{o as Z}from"../chunks/DKpGyjba.js";import{p as tt,h as et,s as p,q as at,i as n,t as u,g as s,m as o,j as l,n as w,k as rt,o as k}from"../chunks/DEIXV2yr.js";import{s as f}from"../chunks/Bv3bKQ8S.js";import{i as B}from"../chunks/BKTWmeyc.js";import{s as st,a as ot}from"../chunks/kH2wg-ph.js";import{p as it}from"../chunks/DoQqZvXX.js";import{a as F,A as H}from"../chunks/CowlEwwk.js";import{g as nt}from"../chunks/GlkoDLOJ.js";import{H as lt,C as dt}from"../chunks/ARQSVmb3.js";import{B as Y}from"../chunks/BuIY9Rip.js";import{B as pt}from"../chunks/EGcPkOJ4.js";var ct=g('<div class="bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 px-4 py-3 rounded-lg text-sm">Subscription activated! Your plan has been upgraded.</div>'),vt=g('<div class="bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm"> </div>'),mt=g('<div class="space-y-4"><div><h4 class="text-sm font-medium mb-2">Upgrade to Pro</h4> <ul class="space-y-1.5 text-sm text-zinc-400"><li>100,000 tool calls / month (10x more)</li> <li>Unlimited projects</li> <li>Team collaboration, SSO, BYOD</li> <li>Priority support</li></ul></div> <!></div>'),ut=g('<div class="flex items-start justify-between"><div><h3 class="font-semibold mb-1">Current plan</h3> <div class="flex items-center gap-3"><span class="text-3xl font-bold"> </span> <span class="text-zinc-500">/month</span> <!></div></div></div> <div class="mt-6 pt-6 border-t border-zinc-800"><!></div>',1),ft=g('<div class="max-w-4xl space-y-8"><!> <!> <!> <!></div>');function Ct(q,D){tt(D,!0);const E=()=>ot(it,"$page",R),[R,T]=st(),m=nt();let r=k(!1),c=k(""),z=k(!1);Z(()=>{E().url.searchParams.get("success")==="true"&&(o(z,!0),m.initialize())});async function G(){o(r,!0),o(c,"");try{const{url:t}=await F.createCheckout();window.location.href=t}catch(t){o(c,t instanceof H?t.message:"Failed to start checkout",!0),o(r,!1)}}async function I(){o(r,!0),o(c,"");try{const{url:t}=await F.openPortal();window.location.href=t}catch(t){o(c,t instanceof H?t.message:"Failed to open billing portal",!0),o(r,!1)}}var h=ft(),C=n(h);lt(C,{title:"Billing",description:"Manage your subscription and payment method."});var j=p(C,2);{var J=t=>{var v=ct();i(t,v)};B(j,t=>{s(z)&&t(J)})}var A=p(j,2);{var K=t=>{var v=vt(),_=n(v,!0);l(v),u(()=>f(_,s(c))),i(t,v)};B(A,t=>{s(c)&&t(K)})}var L=p(A,2);dt(L,{children:(t,v)=>{var _=ut(),x=at(_),M=n(x),O=p(n(M),2),$=n(O),N=n($,!0);l($);var Q=p($,4);{let a=rt(()=>{var e;return((e=m.tenant)==null?void 0:e.plan)==="pro"?"success":"default"});pt(Q,{get variant(){return s(a)},children:(e,b)=>{w();var d=P();u(()=>{var y;return f(d,((y=m.tenant)==null?void 0:y.plan)??"free")}),i(e,d)},$$slots:{default:!0}})}l(O),l(M),l(x);var S=p(x,2),V=n(S);{var W=a=>{var e=mt(),b=p(n(e),2);Y(b,{onclick:G,get loading(){return s(r)},get disabled(){return s(r)},children:(d,y)=>{w();var U=P();u(()=>f(U,s(r)?"Redirecting...":"Upgrade to Pro â€” $6.50/mo")),i(d,U)},$$slots:{default:!0}}),l(e),i(a,e)},X=a=>{Y(a,{variant:"secondary",onclick:I,get loading(){return s(r)},get disabled(){return s(r)},children:(e,b)=>{w();var d=P();u(()=>f(d,s(r)?"Opening...":"Manage subscription")),i(e,d)},$$slots:{default:!0}})};B(V,a=>{var e;((e=m.tenant)==null?void 0:e.plan)==="free"?a(W):a(X,!1)})}l(S),u(()=>{var a;return f(N,((a=m.tenant)==null?void 0:a.plan)==="pro"?"$6.50":"$0")}),i(t,_)},$$slots:{default:!0}}),l(h),i(q,h),et(),T()}export{Ct as component};
