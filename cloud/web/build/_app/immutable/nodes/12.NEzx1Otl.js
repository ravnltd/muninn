import{a as i,t as P,f as g}from"../chunks/Dp4zGy6Y.js";import{o as Z}from"../chunks/D1MHOrrt.js";import{p as tt,h as et,s as c,o as at,j as n,t as u,g as s,k as o,l,n as w,F as rt,m as k}from"../chunks/BJmdqduM.js";import{s as f}from"../chunks/9hSCU5Uy.js";import{i as B,s as st,a as ot}from"../chunks/eWemM8hH.js";import{p as it}from"../chunks/CyvxhY_c.js";import{a as U,A as H}from"../chunks/CObeKhF_.js";import{g as nt}from"../chunks/CxK7HfGX.js";import{H as lt,C as dt}from"../chunks/Do8S-cRJ.js";import{B as Y}from"../chunks/C46VhHkI.js";import{B as ct}from"../chunks/CPLg08HV.js";var pt=g('<div class="bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 px-4 py-3 rounded-lg text-sm">Subscription activated! Your plan has been upgraded.</div>'),vt=g('<div class="bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm"> </div>'),mt=g('<div class="space-y-4"><div><h4 class="text-sm font-medium mb-2">Upgrade to Pro</h4> <ul class="space-y-1.5 text-sm text-zinc-400"><li>100,000 tool calls / month (10x more)</li> <li>Unlimited projects</li> <li>Team collaboration, SSO, BYOD</li> <li>Priority support</li></ul></div> <!></div>'),ut=g('<div class="flex items-start justify-between"><div><h3 class="font-semibold mb-1">Current plan</h3> <div class="flex items-center gap-3"><span class="text-3xl font-bold"> </span> <span class="text-zinc-500">/month</span> <!></div></div></div> <div class="mt-6 pt-6 border-t border-zinc-800"><!></div>',1),ft=g('<div class="max-w-4xl space-y-8"><!> <!> <!> <!></div>');function zt(D,E){tt(E,!0);const R=()=>ot(it,"$page",T),[T,q]=st(),m=nt();let r=k(!1),p=k(""),z=k(!1);Z(()=>{R().url.searchParams.get("success")==="true"&&(o(z,!0),m.initialize())});async function G(){o(r,!0),o(p,"");try{const{url:t}=await U.createCheckout();window.location.href=t}catch(t){o(p,t instanceof H?t.message:"Failed to start checkout",!0),o(r,!1)}}async function I(){o(r,!0),o(p,"");try{const{url:t}=await U.openPortal();window.location.href=t}catch(t){o(p,t instanceof H?t.message:"Failed to open billing portal",!0),o(r,!1)}}var h=ft(),C=n(h);lt(C,{title:"Billing",description:"Manage your subscription and payment method."});var j=c(C,2);{var J=t=>{var v=pt();i(t,v)};B(j,t=>{s(z)&&t(J)})}var A=c(j,2);{var K=t=>{var v=vt(),_=n(v,!0);l(v),u(()=>f(_,s(p))),i(t,v)};B(A,t=>{s(p)&&t(K)})}var L=c(A,2);dt(L,{children:(t,v)=>{var _=ut(),x=at(_),F=n(x),M=c(n(F),2),$=n(M),N=n($,!0);l($);var Q=c($,4);{let a=rt(()=>{var e;return((e=m.tenant)==null?void 0:e.plan)==="pro"?"success":"default"});ct(Q,{get variant(){return s(a)},children:(e,b)=>{w();var d=P();u(()=>{var y;return f(d,((y=m.tenant)==null?void 0:y.plan)??"free")}),i(e,d)},$$slots:{default:!0}})}l(M),l(F),l(x);var O=c(x,2),V=n(O);{var W=a=>{var e=mt(),b=c(n(e),2);Y(b,{onclick:G,get loading(){return s(r)},get disabled(){return s(r)},children:(d,y)=>{w();var S=P();u(()=>f(S,s(r)?"Redirecting...":"Upgrade to Pro â€” $6.50/mo")),i(d,S)},$$slots:{default:!0}}),l(e),i(a,e)},X=a=>{Y(a,{variant:"secondary",onclick:I,get loading(){return s(r)},get disabled(){return s(r)},children:(e,b)=>{w();var d=P();u(()=>f(d,s(r)?"Opening...":"Manage subscription")),i(e,d)},$$slots:{default:!0}})};B(V,a=>{var e;((e=m.tenant)==null?void 0:e.plan)==="free"?a(W):a(X,!1)})}l(O),u(()=>{var a;return f(N,((a=m.tenant)==null?void 0:a.plan)==="pro"?"$6.50":"$0")}),i(t,_)},$$slots:{default:!0}}),l(h),i(D,h),et(),q()}export{zt as component};
