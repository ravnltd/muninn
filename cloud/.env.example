# Muninn Cloud — Production Environment Variables
# Copy to .env and fill in values: cp .env.example .env

# ============================================================================
# REQUIRED — Service will not start without these
# ============================================================================

# Management database (Turso)
MGMT_DB_URL=libsql://your-mgmt-db.turso.io
MGMT_DB_TOKEN=your-turso-auth-token

# Turso API (for provisioning tenant databases)
TURSO_ORG=your-turso-org
TURSO_API_TOKEN=your-turso-api-token

# Stripe billing
STRIPE_SECRET_KEY=sk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_PRO_PRICE_ID=price_...

# ============================================================================
# RECOMMENDED — Set these for production stability
# ============================================================================

# Public URL (used for OAuth discovery, SAML ACS, redirect URIs)
# Default: https://api.muninn.pro
BASE_URL=https://api.muninn.pro

# CSRF token signing secret for OAuth login forms.
# If not set, a random UUID is generated on startup — OAuth forms will
# break on container restart because tokens signed by the old secret
# become invalid. Generate with: openssl rand -hex 32
CSRF_SECRET=

# Bearer token for /metrics endpoint access from external IPs.
# If not set, metrics are only accessible from localhost/Docker networks.
METRICS_TOKEN=

# ============================================================================
# SSO/SAML — Required only if tenants use SSO
# ============================================================================

# AES-256-GCM encryption key for OIDC client secrets at rest.
# Required when any tenant configures OIDC SSO.
# Generate with: openssl rand -base64 32
SSO_ENCRYPTION_KEY=

# SAML Service Provider entity ID.
# Default: value of BASE_URL
SP_ENTITY_ID=

# ============================================================================
# OPTIONAL
# ============================================================================

# Server port (default: 3000)
PORT=3000

# Additional CORS origins (comma-separated).
# The BASE_URL origin is always allowed.
CORS_ORIGINS=

# Set to "development" to suppress HTTPS warnings in logs
NODE_ENV=production
